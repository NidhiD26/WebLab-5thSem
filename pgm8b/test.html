<?php
$servername = "localhost";
$username = "root";
$password = "";
$dbname = "students";

$conn = new mysqli($servername, $username, $password, $dbname);

if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}

$sql = "SELECT * FROM students";
$result = $conn->query($sql);

$students = [];
if ($result->num_rows > 0) {
    while ($row = $result->fetch_assoc()) {
        $students[] = $row;
    }
}

function selectionSort(&$arr, $key)
{
    $n = count($arr);
    for ($i = 0; $i < $n - 1; $i++) {
        $minIndex = $i;
        for ($j = $i + 1; $j < $n; $j++) {
            if ($arr[$j][$key] < $arr[$minIndex][$key]) {
                $minIndex = $j;
            }
        }

        $temp = $arr[$i];
        $arr[$i] = $arr[$minIndex];
        $arr[$minIndex] = $temp;
    }
}

selectionSort($students, 'name');
?>

<!DOCTYPE html>
<html>

<head>
    <title>Sorted Students</title>
    <style>
        body {
            font-family: Arial;
            background: #f9f9f9;
            text-align: center;
        }

        table {
            width: 80%;
            margin: auto;
            border-collapse: collapse;
            background: white;
        }

        th,
        td {
            padding: 8px;
            border: 1px solid #ccc;
        }

        th {
            background: #444;
            color: white;
        }

        tr:hover {
            background: #eee;
        }
    </style>
</head>

<body>
    <h2>Sorted Student Records by Name</h2>
    <table>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>USN</th>
            <th>Branch</th>
            <th>Email</th>
            <th>Address</th>
        </tr>
        <?php foreach($students as $s): ?>
        <tr>
            <td>
                <?= $s['id'] ?>
            </td>
            <td>
                <?= $s['name'] ?>
            </td>
            <td>
                <?= $s['usn'] ?>
            </td>
            <td>
                <?= $s['branch'] ?>
            </td>
            <td>
                <?= $s['email'] ?>
            </td>
            <td>
                <?= $s['address'] ?>
            </td>
        </tr>
        <?php endforeach; ?>
    </table>
</body>

</html>